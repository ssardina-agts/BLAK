%!TEX root = ./dp7-application.tex
\begin{tikzpicture} [level distance=8.0em]
\tikzstyle{planbox}=[draw,minimum width=7.5em,rectangle split,rectangle split parts=2,text width=7.0em]
\tikzstyle{goalbox}=[draw,rounded corners=2em,minimum height=4em,minimum width=4.5em]

	
\tikzstyle{level 1}=[sibling distance=8.5em] 
\tikzstyle{level 2}=[level distance=7.0em] 

\node[goalbox,solid] {$G($k,s$)$}
	child {node[planbox] {$Execute$ \nodepart{second}
			context k=0?;
			run modules for one period;
			evaluate pass/fail
		}
	}
	child {node[planbox] {$SetCharge$ \nodepart{second}
			test module $k$ contraints;
			mark for charging;
			repost goal
		}
		child {node[goalbox] {$G($k-1,s$)$}}
	}
	child {node[planbox] {$SetDischarge$ \nodepart{second}
			test module $k$ contraints;
			mark for discharging;
			repost goal
		}
		child {node[goalbox] {$G($k-1,s$)$}}
	}
	child {node[planbox] {$SetPrevious$ \nodepart{second}
			test module $k$ contraints;
			maintain previous state;
			repost goal
		}
		child {node[goalbox] {$G($k-1,s$)$}}
	}
	child {node[planbox] {$SetNotUsed$ \nodepart{second}
			test module $k$ contraints;
			mark as not used;
			repost goal
		}
		child {node[goalbox] {$G($k-1,s$)$}}
	}
;

\end{tikzpicture}


